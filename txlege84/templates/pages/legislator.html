{% extends 'base.html' %}

{% block og_data %}
  {% include "includes/og/og_lawmaker.html" %}
{% endblock %}

{% block mobileheader %}
  {% include "components/page-headers/legislator-page-header.html" %}
{% endblock %}

{% block desktopheader %}
  {% include "components/page-headers/legislator-page-header.html" %}
{% endblock %}

{% block content %}

{% if object.memberships.first != null %}
<header>
  <h3 class="section-header">Committee assignments</h3>
</header>
<div class="committee-assignments">
  <ul>
    {% for membership in object.memberships.all %}
    <li>
      {{ membership.role }}, <a href="{{ membership.committee.get_absolute_url }}">{{ membership.committee }}</a>
    </li>
    {% endfor %}
  </ul>
</div>
{% endif %}

<header>
  <h3 class="section-header">Filed legislation</h3>
</header>
<div class="bill-table">
  {% if object.authored_bills.first = None %}
    <p>This lawmaker hasn't field any legislation yet.</p>
  {% else %}
    <table>
      <thead>
        <tr>
          <th>Bill</th>
          <th>Caption</th>
          <th>Date of last action</th>
        </tr>
      </thead>
      <tbody>
        {% for sponsorship in object.sponsorships.all %}
          {% if sponsorship.role = 'author' %}
          <tr>
            <td data-title="Bill"><a href="{{ sponsorship.bill.get_absolute_url }}">{{ sponsorship.bill.name }}</a></td>
            <td data-title="Caption">{{ sponsorship.bill.description }}</td>
            <td data-title="Date of last action">{{ sponsorship.bill.last_action_date|date:"SHORT_DATE_FORMAT" }}</td>
          </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
</div>

{% endblock %}
